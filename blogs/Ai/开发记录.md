## 模型结构化输出差异


### MIniMax M2 官方api的一次对话中响应中有几率回复 content 和 tool_calls
#### content 和 tool_calls 输出
大部分模型在输出 tool_calls 工具命令时，一般较少输出正文 content ，这个一般是概率问题，目前 MiniMaxM2、qwen3-max、doubao-seed-1-6-251015 均可以；

可以使用提示词增强输出 tool_calls 命令时 content 的输出概率，但这只是概率增加；

```markdown
- 当你输出调用工具时。请同时输出调用该工具的理由和目的,以便用户理解你为什么要调用该工具，但要尽量隐藏工具具体信息
```

实际开发对于 content 、thiks（思考内容）、tool_calls 传输处理和前端渲染要注意分开处理；

#### minimaxM2 模型 content 和 think 输出差异

minimax-m2 模型思考内容 think 默认内嵌到 content 中<think></think> 中输出；

minimax-m2 是交错思维模型，每次推理最好提供历史推理思考内容，这一能力使 M2 能够在长远且复杂的任务中表现出色。为了兼容大部分工具、平台、框架的 content 和 think 处理，模型默认将 think 放到 content ，避免后面回传丢失，丢失可能会影响模型的推理能力；

官方提供的api接口已经适配了大部分工具、框架等，自动将 content 和 think 在输出输入时处理，但大部分还需自己处理；

openaiSDK可加 `extra_body={"reasoning_split": True}`参数，将输出的 think 分离到 reasoning_split 对象；输入时还需要自己塞回去concant ，官方强烈建议开发者使用兼容交错思维的格式 ：content``<think>reasoning_content</think>

本地部署的 minimax-m2 模型，没有太多兼容，聊天模板固定了 think 包含在 content，openaiSDK没有对其进行适配，需要自己手动分离，或者修改模型聊天模板（不太建议），回传也是同样；

分离实现参考：[my_collection/Scripts/think内容分离 at main · liyxie/my_collection](https://github.com/liyxie/my_collection/tree/main/Scripts/think内容分离)

## 模型消息结构化输入

大部分模型的

MiniMax-M2
(YXDWorker pid=1712415) 调用API失败，error: Error code: 400 - {'type': 'error', 'error': {'type': 'bad_request_error', 'message': "invalid params, tool result's tool id(call_e36d23680b6646bc9edea594) not found (2013)", 'http_code': '400'}, 'request_id': '059599464d77d6ec4f29eecff9b10309'}	